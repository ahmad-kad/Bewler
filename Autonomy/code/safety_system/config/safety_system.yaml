# URC 2026 Safety System Configuration
# Comprehensive safety system settings for rover operation

safety_system:
  # Safety Watchdog Configuration
  watchdog:
    # Monitoring levels to enable
    levels:
      - HEARTBEAT        # System heartbeat monitoring
      - STATE_TRANSITIONS # State machine transition monitoring
      - SUBSYSTEM_HEALTH  # Individual subsystem health
      - SENSOR_INTEGRITY  # Sensor data integrity

    # Timeout thresholds (seconds)
    heartbeat_timeout: 5.0
    state_transition_timeout: 30.0
    subsystem_health_timeout: 10.0
    sensor_integrity_timeout: 2.0

    # Safety thresholds
    battery_critical_threshold: 10.0    # Battery percentage
    temperature_critical_threshold: 85.0  # Celsius
    temperature_warning_threshold: 70.0   # Celsius

    # Emergency response settings
    enable_emergency_stop: true
    enable_automatic_recovery: false

  # Redundant Safety Monitor Configuration
  redundant_monitor:
    # Sensor safety limits
    imu_accel_max: 50.0      # m/sÂ² (unreasonable acceleration)
    imu_gyro_max: 20.0       # rad/s (unreasonable rotation)
    velocity_max: 5.0        # m/s (safe velocity limit)
    position_uncertainty_max: 10.0  # meters (GPS uncertainty)

    # Battery and thermal limits
    battery_critical: 10.0   # percentage
    battery_warning: 20.0    # percentage
    temperature_critical: 85.0  # Celsius
    temperature_warning: 70.0   # Celsius

    # Communication settings
    communication_timeout: 5.0  # seconds

  # Emergency Response Coordinator Configuration
  emergency_coordinator:
    # Safety stop types (replaces old emergency stop hierarchy)
    safety_types:
      ESTOP: 1         # Hardware emergency stop (power cut)
      SAFESTOP: 2      # Software graceful pause (toggle-able)

    # Response timeouts (seconds)
    safety_ack_timeout: 2.0
    subsystem_stop_timeout: 5.0
    stabilization_period: 10.0

    # Recovery settings
    enable_automatic_recovery: false
    recovery_ack_timeout: 30.0
    safestop_toggle_enabled: true  # Allow operator to toggle safestop

  # Proximity Monitor Configuration (Auto-Safe)
  proximity_monitor:
    # Auto-safe distance thresholds (meters)
    auto_safe_distance: 0.8      # Trigger safestop (closer than follow-me)
    warning_distance: 1.5        # Trigger warning
    follow_me_distance: 2.0      # Follow-me safety distance

    # Safety zones (distance ranges in meters)
    safety_zones:
      front_critical:
        min_distance: 0.0
        max_distance: 0.5
        severity: "EMERGENCY"
      front_warning:
        min_distance: 0.5
        max_distance: 0.8
        severity: "CRITICAL"
      left_side:
        min_distance: 0.0
        max_distance: 0.8
        severity: "WARNING"
      right_side:
        min_distance: 0.0
        max_distance: 0.8
        severity: "WARNING"
      rear:
        min_distance: 0.0
        max_distance: 0.3
        severity: "WARNING"

    # Sensor settings
    update_rate: 10.0            # Hz
    violation_cooldown: 1.0       # seconds between violations
    reading_history_size: 50      # number of readings to keep

  # Safety Dashboard Configuration
  dashboard:
    # Alert thresholds
    max_active_alerts: 10
    health_score_threshold: 0.7
    communication_timeout: 30.0
    sensor_timeout: 10.0

    # Alert escalation settings
    alert_escalation_threshold: 3  # Similar alerts before escalation
    auto_resolve_timeout: 300.0    # Auto-resolve alerts after 5 minutes

  # Integration Testing Configuration
  integration_testing:
    # Test scenarios to enable
    enabled_scenarios:
      - BATTERY_CRITICAL
      - COMMUNICATION_LOSS
      - THERMAL_WARNING
      - SENSOR_FAILURE
      - EMERGENCY_STOP
      - CONSISTENCY_CHECK
      - PERFORMANCE_LOAD

    # Test execution settings
    test_timeout: 120.0      # Maximum test duration (seconds)
    inter_test_delay: 5.0    # Delay between tests (seconds)

    # Validation settings
    validation_timeout: 30.0  # Validation phase timeout
    success_threshold: 0.8    # Minimum success rate for test suite

# Competition-specific safety settings
competition:
  # URC 2026 specific thresholds
  urc_thresholds:
    battery_minimum: 15.0    # Never go below 15% in competition
    temperature_max: 75.0    # Maximum temperature for competition
    velocity_limit: 3.0      # Competition velocity limit (m/s)

  # Emergency procedures
  emergency_procedures:
    auto_stop_enabled: true
    manual_override_allowed: true
    remote_emergency_enabled: true

  # Safety zones (competition area boundaries)
  safety_zones:
    competition_area:
      # GPS coordinates defining competition boundaries
      # These would be filled in with actual URC coordinates
      boundary_points: []
    no_go_zones:
      # Restricted areas within competition site
      - name: "lander_area"
        coordinates: []
      - name: "spectator_area"
        coordinates: []

# Development and testing settings
development:
  # Debug settings
  debug_mode: false
  verbose_logging: false
  enable_test_interfaces: false

  # Simulation settings
  simulation_mode: false
  mock_sensor_data: false

  # Performance monitoring
  enable_performance_monitoring: true
  metrics_collection_interval: 1.0  # seconds
